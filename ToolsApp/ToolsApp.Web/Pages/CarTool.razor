@page "/car-tool"

@using ToolsApp.Core.Interfaces.Models
@using ToolsApp.Models

<header>
  <h3>Car Tool</h3>
</header>

<table>
  <thead>
    <tr>
      <th>Id</th>
      <th>Make</th>
      <th>Model</th>
      <th>Year</th>
      <th>Color</th>
      <th>Price</th>
    </tr>
  </thead>
  <tbody>
    @foreach (var car in Cars)
    {
      <tr>
        <td>@car.Id</td>
        <td>@car.Make</td>
        <td>@car.Model</td>
        <td>@car.Year</td>
        <td>@car.Color</td>
        <td>@car.Price</td>
      </tr>
    }
  </tbody>
</table>

<form>
  <label>
    Make:
    <input type="text" @bind="@carForm.Make" />
  </label>
  <label>
    Model:
    <input type="text" @bind="@carForm.Model" />
  </label>
  <label>
    Year:
    <input type="number" @bind="@carForm.Year" />
  </label>
  <label>
    Color:
    <input type="text" @bind="@carForm.Color" />
  </label>
  <label>
    Price:
    <input type="number" @bind="@carForm.Price" />
  </label>
  <button type="button" @onclick="@AddCar">Add Car</button>
</form>

@code {

  private CarFormModel carForm = new();

  public List<ICar> Cars { get; set; } = new List<ICar>() {
    new Car() { Id = 1, Make="Ford", Model="Fusion Hybrid", Year=2020, Color="Blue", Price=45000 },
    new Car() { Id = 2, Make="Tesla", Model="S", Year=2022, Color="Red", Price=115000 },
  };

  public void AddCar()
  {
    Cars.Add(new Car()
      {
        Id = Cars.Any() ? Cars.Max(c => c.Id) + 1 : 1,
        Make = carForm.Make,
        Model = carForm.Model,
        Year = carForm.Year,
        Color = carForm.Color,
        Price = carForm.Price,
      });
  }

  class CarFormModel {
    public string Make { get; set; }
    public string Model { get; set; }
    public int Year { get; set; }
    public string Color { get; set; }
    public decimal Price { get; set; }
  }

}
